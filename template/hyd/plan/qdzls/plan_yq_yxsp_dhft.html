<!-- 液相色谱 -->
<h1>液相色谱检测{$arow['assay_element']}原始记录</h1>
{$hjtj_bt}
<table class="single" >
  <tr class="noborder">
    <td style="width:5%"></td><td style="width:9%"></td><td style="width:9%"></td>
    <td style="width:9%"></td><td style="width:9%"></td><td style="width:9%"></td>
    <td style="width:9%"></td><td style="width:9%"></td><td style="width:9%"></td>
    <td style="width:9%"></td><td style="width:7%"></td><td style="width:7%"></td>
  </tr>
  <tr>
    <td>检验方法依据</td>
    <td colspan="5">{$arow['td2']}</td>
    <td colspan="2">仪器型号/编号</td>
    <td colspan="4">{$arow['td5']}/{$arow['yq_bh']}</td>
  </tr>
  <tr>
    <td>色谱柱</td>
    <td><input type="text" class="inputc" name="td12" value="{$arow['td12']}" /></td>
    <td colspan="2">流动相</td>
    <td colspan="3"><input type="text" class="inputc" name="td13" value="{$arow['td13']}" /></td>
    <td colspan="2">检测器</td>
    <td colspan="3"><input type="text" class="inputc" name="td14" value="{$arow['td14']}" /></td>
  </tr>
  <tr>
    <td>柱温度（℃）</td>
    <td><input type="text" class="inputc" name="td15" value="{$arow['td15']}" /></td>
    <td colspan="2">流速<br />（mL/min）</td>
    <td colspan="3"><input type="text" class="inputc" name="td16" value="{$arow['td16']}" /></td>
    <td colspan="2">检测器波长<br />（mL/min）</td>
    <td colspan="3"><input type="text" class="inputc" name="td17" value="{$arow['td17']}" /></td>
  </tr>
  <tr>
    <td>进样体积（μL）</td>
    <td><input type="text" class="inputc" name="td18" value="{$arow['td18']}" /></td>
    <td colspan="2">取样体积<br />（mL）</td>
    <td colspan="3"><input type="text" class="inputc" name="td19" value="{$arow['td19']}" /></td>
    <td colspan="2">浓缩倍数</td>
    <td colspan="3"><input type="text" class="inputc nsbs_{$tid}" name="td20" value="{$arow['td20']}" /></td>
  </tr>
  <tr>
    <td>氧化剂流速（mL/min）</td>
    <td><input type="text" class="inputc" name="td21" value="{$arow['td21']}" /></td>
    <td colspan="2">标记液流速<br />（mL/min）</td>
    <td colspan="3"><input type="text" class="inputc" name="td22" value="{$arow['td22']}" /></td>
    <td colspan="2">反应线圈温度<br />（℃n）</td>
    <td colspan="3"><input type="text" class="inputc" name="td23" value="{$arow['td23']}" /></td>
  </tr>
  <!-- <tr class="bt_hidden">
    <td rowspan="2">分量检出限<br />设置（mg/L）</td>
    <td>萘</td>
    <td>荧蒽</td>
    <td>苯并（a）<br />芘</td>
    <td>苯并（b）<br />荧蒽</td>
    <td>苯并（k）<br />荧蒽</td>
    <td colspan="2">苯并（ghi）芘</td>
    <td colspan="2">茚苯（1,2,3-cd）芘</td>
  </tr>
  <tr class="bt_hidden">
    <td><input type="text" class="inputc" placeholder="0.000006" name="td16" value="{$arow['td16']}" /></td>
    <td><input type="text" class="inputc" placeholder="0.000001" name="td18" value="{$arow['td18']}" /></td>
    <td><input type="text" class="inputc" placeholder="0.000001" name="td21" value="{$arow['td21']}" /></td>
    <td><input type="text" class="inputc" placeholder="0.000003" name="td20" value="{$arow['td20']}" /></td>
    <td><input type="text" class="inputc" placeholder="0.000001" name="td19" value="{$arow['td19']}" /></td>
    <td colspan="2"><input type="text" class="inputc" placeholder="0.000005" name="td22" value="{$arow['td22']}" /></td>
    <td colspan="2"><input type="text" class="inputc" placeholder="0.0000024" name="td23" value="{$arow['td23']}" /></td>
  </tr> -->
  <tr>
    <td>序号</td>
    <td>{$zhanming}</td>
    <td>萘</td>
    <td>荧蒽</td>
    <td>苯并（a）<br />芘</td>
    <td>苯并（b）<br />荧蒽</td>
    <td>苯并（k）<br />荧蒽</td>
    <td>苯并（ghi）<br />芘</td>
    <td>茚苯<br />（1,2,3-cd）芘</td>
    <td>{$arow['assay_element']}（{$arow['unit']}）</td>
    <td>平均值/理论浓度<br />（{$arow['unit']}）</td>
    <td>相对偏差/回收率<br />（％）</td>
  </tr>
    {$aline}
  <tr>
    <td>备注</td>
    <td colspan="9"><textarea name="td30">{$arow['td30']}</textarea></td>
  </tr>
</table>
<script type="text/javascript">
//检出限默认
// var jcx_404 = parseFloat('{$arow['td16']}');//萘 404
// var jcx_399 = parseFloat('{$arow['td18']}');//荧蒽399
// var jcx_394 = parseFloat('{$arow['td21']}');//苯并(a)芘394
// var jcx_395 = parseFloat('{$arow['td20']}');//苯并(b)荧蒽395
// var jcx_396 = parseFloat('{$arow['td19']}');//苯并(k)荧蒽396
// var jcx_398 = parseFloat('{$arow['td22']}');//苯并(ghi)芘398
// var jcx_397 = parseFloat('{$arow['td23']}');//茚苯(1,2,3-cd)芘397
//检出限默认
var jcx_404 = parseFloat('');//萘 404
var jcx_399 = parseFloat('');//荧蒽399
var jcx_394 = parseFloat('');//苯并(a)芘394
var jcx_395 = parseFloat('');//苯并(b)荧蒽395
var jcx_396 = parseFloat('');//苯并(k)荧蒽396
var jcx_398 = parseFloat('');//苯并(ghi)芘398
var jcx_397 = parseFloat('');//茚苯(1,2,3-cd)芘397

$.isNumeric(jcx_404) || (jcx_404='0.0000060');
$.isNumeric(jcx_399) || (jcx_399='0.0000010');
$.isNumeric(jcx_394) || (jcx_394='0.0000010');
$.isNumeric(jcx_395) || (jcx_395='0.0000030');
$.isNumeric(jcx_396) || (jcx_396='0.0000010');
$.isNumeric(jcx_398) || (jcx_398='0.0000050');
$.isNumeric(jcx_397) || (jcx_397='0.0000024');
$(document).ready(function(){
  //第一次载入的时候
  $("#assay_form_{$tid} .hyd[value='']").trigger('blur');
})
function jsgs () {
  var fl_arr = [404,399,394,395,396,398,397];
  try{
    if(''==vs['vd27']){
      var zl_obj = {};
    }else{
      var zl_obj = $.parseJSON(vs['vd27']);//总量
    }
  }catch(e){
    vs['vd0'] = '';
    return false;
  }
  var i = 3;      //存储数值的vd
  var jg = 0;     //结果值
  var zl_arr = {};//重定义分量的json数据
  var isNumeric = true;
  var xy_jcx_All = true;
  for( var k=0; k<fl_arr.length;k++){
    var vid = fl_arr[k];
    if(undefined == zl_obj[vid]){
      zl_obj[vid] = '';
    }
    //初始化存储分量结果的变量
    eval("var e_"+vid+" = '';");
    //输入的数据为数值格式
    var a = eval("$.isNumeric(vs['vd"+i+"'])");
    //输入的数据不是小于检出限的形式
    var b = eval("'<'!=parseFloat(vs['vd"+i+"'])");
    //载入的原始数据与记录的原始数据一致时说明并没有重新进行数据载入操作
    var c = eval("!$.isNumeric(vs['vd"+(i+1)+"']) || parseFloat(vs['vd"+(i+1)+"'])==parseFloat(zl_obj["+vid+"])");
    if( a && b && c ){
      //符合条件则说明是化验员在化验单上对数据手动做了修改
      eval("zl_obj["+vid+"]=vs['vd"+i+"']");
    }
    //重定义分量的json数据
    zl_arr[vid] = parseFloat(zl_obj[vid]);
    if(!$.isNumeric(zl_obj[vid])){
      //如果分量不是数值则清空数据
      eval("e_"+vid+" = vs['vd"+i+"'] = vs['vd"+(i+1)+"'] = '';");
    }else{
      //将分量计算值，显示值，原始值分别进行存储
      var nsbs = $.isNumeric($('.nsbs_{$tid}').val()) ? $('.nsbs_{$tid}').val() : 1;
      eval("e_"+vid+" = vs['vd"+i+"'] = vs['vd"+(i+1)+"'] = parseFloat(zl_obj["+vid+"])/nsbs;");
      //小于检出限的使用检出限的一半
      eval("if(e_"+vid+"<parseFloat(jcx_"+vid+")){e_"+vid+"=parseFloat(jcx_"+vid+")/2;vs['vd"+i+"'] = '<'+jcx_"+vid+";}else{xy_jcx_All=false;}");
    }
    i += 2;
    if(isNumeric && eval("$.isNumeric(e_"+vid+")")){
      //总量等于分量求和
      eval("jg += parseFloat(e_"+vid+");");
    }else{
      //如果有一个分量的数值没有则不再进行计算
      isNumeric = false;
    }
  }
  //重定义分量的json数据
  vs['vd27'] = JSON.stringify(zl_arr);
  if(isNumeric){
    vs['vd0'] = (xy_jcx_All==true) ? '<{$arow['td3']}' : jsws(jg);
  }else{
    vs['vd0'] = '';
  }
}
</script>